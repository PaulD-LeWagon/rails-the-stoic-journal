<div class="d-flex justify-content-center align-items-start min-vh-100">

  <div class="col-md-10 p-3">

    <div class="header d-flex justify-content-between align-items-center">

      <h1 class="my-5 mb-3 fst-bold">All Tasks</h1>

      <%= link_to new_task_path, class: "btn bg-quinary btn-lg", title: "Add a new Task?" do %>
        <i class="fa-solid fa-square-plus"></i>
      <% end %>

    </div>

    <hr>

    <% @tasks.each do |task| %>

      <h3>Task #<%= task.order %> <%= task.title %><h3>

      <p class="bd-font"><%= task.description %></p>

      <div class="d-flex justify-content-end">

        <%= render 'links', task: task %>

        <a href="#" type="button"
          class="btn btn-warning m-1"
          data-bs-toggle="collapse"
          data-bs-target="#collapse<%= task.id %>"
          aria-expanded="false"
          aria-controls="collapse<%= task.id %>">

          <i class="fa-solid fa-chevron-down"></i>
        </a>

      </div>
      <div class="collapse" id="collapse<%= task.id %>">

        <hr>

        <% task.sub_tasks.each do |subtask| %>

          <h4>SubTask #<%= subtask.order %> <%= subtask.title %><h4>

          <p><%= subtask.description %></p>

          <%= render 'links', task: task %>

          <hr>

        <% end %>

      </div>

      <hr>

    <% end %>

  </div>

</div>
